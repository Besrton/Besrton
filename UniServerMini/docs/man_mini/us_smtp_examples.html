<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <title>PHP Mail Examples</title>
  <link href="common/css/main.css" rel="stylesheet" type="text/css">
  <link href="common/css/menu.css" rel="stylesheet" type="text/css">
</head>

<body id="p50">
<!-- Start header -->
  <script language="javascript" src="common/header.js"></script>
<!-- End header -->

<table id="main" >
<tr valign="top">

<td id="td_menu">
  <script language="javascript" src="common/top_menu.js"></script>
</td>

<td id="td_spacer" ></td >

<td id="td_content" >
<!-- ============ Start Content ========== -->

<h1>PHP Mail Examples</h1>

<h2>Introduction</h2>

<p>This page provides email examples using the PHP mail function. Although not a definitive guide examples shown may be of use.</p>
<p>Examples located in folder: \docs\man_mini\php_mail_examples</p>
<div id="page_links_menu_shadow" >
 <div id="page_links_menu" >
  <ul>
   <li><a href="#PHP Mail function" >PHP Mail function</a></li>
   <li><a href="#Parameters" >Parameters</a></li>
   <li><a href="#Required" >&nbsp;&nbsp;Required</a></li>
   <li><a href="#Optional" >&nbsp;&nbsp;Optional</a></li>

   <li><a href="#Important note" >Important note</a></li>

   <li><a href="#Example 1 - Basic" >Example 1 - Basic</a></li>
   <li><a href="#Example 2 - Additional headers" >Example 2 - Additional headers</a></li>
   <li><a href="#Example 3 - HTML message" >Example 3 - HTML message</a></li>
   <li><a href="#Example 4 - Html and plain text emails" >Example 4 - Html and plain text emails</a></li>

   <li><a href="#Example 5a - Text file as attachment" >Example 5a - Text file as attachment</a></li>
   <li><a href="#Example 5b - Image file as attachment" >Example 5b - Image file as attachment</a></li>
   <li><a href="#Example 5c - Text and Image file as attachments" >Example 5c - Text and Image file as attachments</a></li>

   <li><a href="#Example 6 - Basic mail forms attach a file" >Example 6 - Basic mail forms attach a file</a></li>
   <li><a href="#Basic HTML mail form" >&nbsp;&nbsp;Basic HTML mail form</a></li>
   <li><a href="#PHP mail processing script" >&nbsp;&nbsp;PHP mail processing script</a></li>

  </ul>
 </div>
</div>

<a name="PHP Mail function"></a>
<h2>PHP Mail function</h2>

<p>The PHP mail function <b>mail()</b> returns TRUE if email was accepted for delivery otherwise returns False.</p>
<pre>
mail(to,subject,message,headers,parameters)
</pre> 

<p><b>Note:</b> Accepted for delivery does not mean your email was sent.</p>

<a name="Parameters"></a>
<h2>Parameters</h2>
<p>The following provides a list of mail function parameters:</p>


<a name="Required"></a>
<h3>Required</h3>

<table cellpadding="3">
  <tr valign="top" bgcolor="#A4A4A4">
    <td><b>Parameter</b></td> <td><b>Description</b></td>
  </tr>  

  <tr valign="top" bgcolor="#D8D8D8">
    <td>to</td>
    <td>Specifies the recipient or recipients of the email</td>
  </tr>

  <tr valign="top" bgcolor="#E8E8E8">
    <td>subject</td>
    <td>A single line defining the email subject, it must not contain new line characters.</td>
  </tr>

  <tr valign="top" bgcolor="#D8D8D8">
    <td>message</td>
    <td>Message to be sent. Each line should not exceed 70 characters and be separated with a LF use (\n) or preferably use a PHP end of line constant <b>PHP_EOL</b>.</td>
  </tr>
</table>

<a name="Optional"></a>
<h3>Optional</h3>

<table cellpadding="3">

  <tr valign="top" bgcolor="#A4A4A4">
    <td><b>Parameter</b></td> <td><b>Description</b></td>
  </tr>  

  <tr valign="top" bgcolor="#D8D8D8">
    <td>headers</td>
    <td>
Specifies additional headers for example <b>From, Cc,</b> and <b>Bcc</b>. Each header shall be separated with a CRLF (\r\n) or preferably use a PHP end of line constant <b>PHP_EOL</b>.
    </td>
  </tr>

  <tr valign="top" bgcolor="#E8E8E8">
    <td>
      parameters
    </td>
    <td>
      Specifies an additional parameter. This is sent to the send-mail client.<br />
      <b>Note:</b> Additional parameters are ignored by the UniformServer us_smtp mail client.
    </td>
  </tr>
</table>

<p><b>Note:</b> An email must contain a <b>From</b> header. Either set this using the <b>headers</b> parameter or in the php.ini file.</p>

<script language="javascript" src="common/top.js"></script>
<a name="Important note"></a>
<h2>Important note</h2>

<p>With a few exceptions such as <b>Gmail</b> majority of free mail service providers insist you specify in the <b>From: </b>field the email address you own with them. If you do not use your account email address they will automatically refuse to relay your mails through their servers.</p>


<script language="javascript" src="common/top.js"></script>
<a name="Example 1 - Basic"></a>
<h2>Example 1 - Basic</h2>

<table>
 <tr valign="top">
  <td>
<b>Notes:</b>
 <p>For compatibility between Unix and Windows use a PHP end of line constant. </p>
 <p>Note: The <b>from</b> address is automatically added. The <b>user</b> address configured in the default account in configuration file us_smtp.ini is used.</p>

  <td>
<b>File: mail_1.php</b>
<pre>
&lt;?php
$eol  = PHP_EOL;                    // Use a PHP end of line constant

$txt  = '';                         // Clear text string
$txt .= "PHP mail_1.php test".$eol; // Note use of line constant
$txt .= "Second line of text".$eol; // Second line

// Send email
mail("ToSomebody@example.com","My subject PHP mail_1.php test",$txt);
?&gt;
</pre>
  </td>
 </tr>
</table>

<script language="javascript" src="common/top.js"></script>
<a name="Example 2 - Additional headers"></a>
<h2>Example 2 - Additional headers</h2>

<table>
 <tr valign="top">
  <td>
<b>Notes:</b>
<p>Unless you are using a very basic email as above always include a <b>From:</b> header as shown on the right.</p>

<p>You can add as many headers as required the example includes a  <b>CC:</b> (Carbon copy) header email address.</p>

  </td>

  <td>
<b>File: mail_2.php</b>
<pre>
&lt;?php
$eol  = PHP_EOL;                    // Use a PHP end of line constant

$txt  = '';                         // Clear text string
$txt .= "PHP mail_2.php test".$eol; // Note use of line constant
$txt .= "Second line of text".$eol; // Second line

$to = "somebody@example.com";             // Send mail to address
$subject = "Subject PHP mail_2.php test"; // Subject text

$headers  = '';                                    // Clear text string
$headers .= "From: webmaster@example.com" . $eol;  // From header
$headers .= "CC: SomeOneElse@example.com";         // Carbon copy header

mail($to,$subject,$txt,$headers);
?&gt; 
</pre>
  </td>
 </tr>
</table>


<script language="javascript" src="common/top.js"></script>
<a name="Example 3 - HTML message"></a>
<h2>Example 3 - HTML message</h2>

<table>
 <tr valign="top">
  <td>
<b>Notes:</b>
<p>This example includes two additional headers <b>Reply-To:</b> and <b>Return-Path:</b> these are optional.</p>

<p>Sending mails with HTML content requires a MIME version <b>MIME-Version:</b> and a content type <b>Content-Type:</b> header to be set as shown on the right.</p>

<p>The message is effectively an HTML page; you can use HTML tags as appropriate for your message.</p>

<p>Not all mail clients understand HTML emails. It is preferable to send mail with both plain text and HTML version see next example. </p>

<p><b>Note:</b><br />
Reply-To: optional header, set to the desired return address for a recipient's mail client when user hits "Reply". Generally it should be set to the same address as the "From:" header. However set this header if sending from an address that isn't monitored for replies. </p>

  </td>

  <td>
<b>File: mail_3.php</b>
<pre>
&lt;?php
$eol  = PHP_EOL;                    // Use a PHP end of line constant

$to = "somebody@example.com";       // Send mail to address
$subject = "HTML email example";    // Subject text

$headers  = '';                                    // Clear text string
$headers .= "From: webmaster@example.com" . $eol;  // From header
$headers .= "Reply-To: me@example.com".$eol;       // Header Option
$headers .= "Return-Path: me2@example.com".$eol;   // Header Option

// Always set MIME version and content-type when sending HTML email
$headers .= "MIME-Version: 1.0".$eol;                           
$headers .= "Content-Type: text/html; charset=ISO-8859-1".$eol; 

$message = '';
$message = "&lt;html&gt;&lt;body&gt;";
$message .= "&lt;h1&gt; An email with HTML tags&lt;/h1&gt;";
$message .= "&lt;h1&gt; Script mail_3.php&lt;/h1&gt;";
$message .= "&lt;/body&gt;&lt;/html&gt;";

if ( mail($to,$subject,$message,$headers) ) {
   echo "The email has been sent!";
   } else {
   echo "The email has failed!";
   }
?&gt;
</pre>
  </td>
 </tr>
</table>


<script language="javascript" src="common/top.js"></script>
<a name="Example 4 - Html and plain text emails"></a>
<h2>Example 4 - Html and plain text emails</h2>

<table>
 <tr valign="top">
  <td>
<b>Notes:</b>
<p>Not all mail clients understand HTML emails. Therefore it is preferable to send mail containing both plain text and HTML messages.</p>
<p>This is achieved using a multipart construction. One part contains a plain-text version of the email and the other part a HTML mark-up version.</p>

<p>The Content-Type header is changed to reflect the alternative selection. New header of Content-type:multipart/alternative also includes a boundary string that marks the different areas of the email.</p>

<p>To close the email body a trailing double negative character (--) is required as shown below:</p>
<pre>
 # End email
 $headers .= "--".$separator."--";
</pre>


 </td>

  <td>
<b>File: mail_4.php</b>
<pre>
&lt;?php
 $separator  = md5(time()); // A random hash is necessary to send mixed content
 $eol        = PHP_EOL;     // Use a PHP end of line constant

 // Email config (change data below)
 $to      = "somebody@example.com";                   // Rceipent address
 $from    = "webmaster@example.com";                  // From 
 $subject = "Plain text and HTML example - Test 4";   // Subject text

 $text_content = "Plain text test section.";          // Plain text message
 $html_content = "&lt;h1&gt;HTML test section.&lt;/h1&gt;";       // HTML message

 // Main header (multipart mandatory)
 $headers  = '';
 $headers  = "From: ".$from.$eol;
 $headers .= "MIME-Version: 1.0".$eol;
 $headers .= "Content-Type: multipart/alternative; boundary=\"".$separator."\"".$eol.$eol;
 $headers .= "Content-Transfer-Encoding: 7bit".$eol;
 $headers .= "This is a MIME encoded message.".$eol.$eol;

 # Add plain text version
 $headers .= "--".$separator.$eol;
 $headers .= "Content-Type: text/plain; charset=\"charset=us-ascii\"".$eol;
 $headers .= "Content-Transfer-Encoding: 7bit".$eol.$eol;
 $headers .= $text_content;
 $headers .= $eol.$eol;

 # Add HTML version
 $headers .= "--".$separator.$eol;
 $headers .= "Content-Type: text/html; charset=\"UTF-8\"".$eol;
 $headers .= "Content-Transfer-Encoding: 7bit".$eol.$eol;
 $headers .= $html_content;
 $headers .= $eol.$eol;

 # Attachments would go here

 # End email
 $headers .= "--".$separator."--";

 // Send message
 mail($to, $subject, "", $headers);
 echo "Mail Sent.";
?&gt; 

</pre>
  </td>
 </tr>
</table>

<script language="javascript" src="common/top.js"></script>
<a name="Example 5a - Text file as attachment"></a>
<h2>Example 5a - Text file as attachment</h2>

<table>
 <tr valign="top">
  <td>
<b>Notes:</b>

<ul>
<li>The file to be attached is read and encoded.</li>
<li>The main header section specifies mime version, sets content type to multipart/mixed and sets the boundary separator to use.</li>
<li>The message header section sets content type to text/html and sets the transfer encoding to 8bit.</li>
<li>The attachment header section sets content type to application/octet-stream, sets the transfer encoding to base64 and Content-Disposition to attachment.</li>
</ul>
  </td>

  <td>
<b>File: mail_5a.php</b>
<pre>
&lt;?php
// Email config (change data below)
$to      = "somebody@example.com";    // Rceipent address
$from    = "webmaster@example.com";   // Your email address
$subject = "Send email with text file as attachment";
$message = "&lt;p&gt;Please see the attachment. Test mail_5a.&lt;/p&gt;";

$separator = md5(time());    // A random hash is necessary to send mixed content
$eol       = PHP_EOL;                          // Use a PHP end of line constant
$filename  = "test_mail_5.txt";                          // Attachment file name

// Read and encode data
$userfile = "./$filename";                              // Set full path to file
$fp = fopen($userfile, "r");                            // Open file for read
$attachment = fread($fp, filesize($userfile));          // Read file
$attachment = chunk_split(base64_encode($attachment));  // Encode

// Main header (multipart mandatory)
$headers = "From: ".$from.$eol;
$headers .= "MIME-Version: 1.0".$eol;
$headers .= "Content-Type: multipart/mixed; boundary=\"".$separator."\"".$eol.$eol;
$headers .= "Content-Transfer-Encoding: 7bit".$eol;
$headers .= "This is a MIME encoded message.".$eol.$eol;

// Message
$headers .= "--".$separator.$eol;
$headers .= "Content-Type: text/html; charset=\"iso-8859-1\"".$eol;
$headers .= "Content-Transfer-Encoding: 8bit".$eol.$eol;
$headers .= $message.$eol.$eol;

// Attachment
$headers .= "--".$separator.$eol;
$headers .= "Content-Type: application/octet-stream; name=\"".$filename."\"".$eol;
$headers .= "Content-Transfer-Encoding: base64".$eol;
$headers .= "Content-Disposition: attachment".$eol.$eol;
$headers .= $attachment.$eol.$eol;
$headers .= "--".$separator."--";

// Send message
mail($to, $subject, "", $headers);
echo "Mail Sent.";
?&gt;


</pre>
  </td>
 </tr>
</table>


<script language="javascript" src="common/top.js"></script>
<a name="Example 5b - Image file as attachment"></a>
<h2>Example 5b - Image file as attachment</h2>

<table>
 <tr valign="top">
  <td>
<b>Notes:</b>

<ul>
<li>The file to be attached is read and encoded.</li>
<li>The main header section specifies mime version, sets content type to multipart/mixed and sets the boundary separator to use.</li>
<li>The message header section sets content type to text/html and sets the transfer encoding to 8bit.</li>
<li>The attachment header section sets content type to application/octet-stream, sets the transfer encoding to base64 and Content-Disposition to attachment.</li>
</ul>

  </td>

  <td>
<b>File: mail_5b.php</b>
<pre>
&lt;?php
// Email config (change data below)
$to      = "somebody@example.com";    // Rceipent address
$from    = "webmaster@example.com";   // Your email address
$subject = "Send email with image file attachment";
$message = "&lt;p&gt;Please see the attachment. Test mail_5b.&lt;/p&gt;";

$separator = md5(time());    // A random hash is necessary to send mixed content
$eol       = PHP_EOL;                          // Use a PHP end of line constant
$filename  = "test_mail_5.png";                          // Attachment file name

// Read and encode data
$userfile = "./$filename";                              // Set full path to file
$fp = fopen($userfile, "r");                            // Open file for read
$attachment = fread($fp, filesize($userfile));          // Read file
$attachment = chunk_split(base64_encode($attachment));  // Encode

// Main header (multipart mandatory)
$headers = "From: ".$from.$eol;
$headers .= "MIME-Version: 1.0".$eol;
$headers .= "Content-Type: multipart/mixed; boundary=\"".$separator."\"".$eol.$eol;
$headers .= "Content-Transfer-Encoding: 7bit".$eol;
$headers .= "This is a MIME encoded message.".$eol.$eol;

// Message
$headers .= "--".$separator.$eol;
$headers .= "Content-Type: text/html; charset=\"iso-8859-1\"".$eol;
$headers .= "Content-Transfer-Encoding: 8bit".$eol.$eol;
$headers .= $message.$eol.$eol;

// Attachment
$headers .= "--".$separator.$eol;
$headers .= "Content-Type: application/octet-stream; name=\"".$filename."\"".$eol;
$headers .= "Content-Transfer-Encoding: base64".$eol;
$headers .= "Content-Disposition: attachment".$eol.$eol;
$headers .= $attachment.$eol.$eol;
$headers .= "--".$separator."--";

// Send message
mail($to, $subject, "", $headers);
echo "Mail Sent.";
?&gt;


</pre>
  </td>
 </tr>
</table>


<script language="javascript" src="common/top.js"></script>
<a name="Example 5c - Text and Image file as attachments"></a>
<h2>Example 5c - Text and Image file as attachments</h2>

<table>
 <tr valign="top">
  <td>
<b>Notes:</b>

<ul>
<li>The file to be attached is read and encoded.</li>
<li>The main header section specifies mime version, sets content type to multipart/mixed and sets the boundary separator to use.</li>
<li>The message header section sets content type to text/html and sets the transfer encoding to 8bit.</li>
<li>The attachment 1 header section sets content type to application/octet-stream, sets the transfer encoding to base64 and Content-Disposition to attachment.</li>
<li>The attachment 2-header section with the exception of file name is identical to attachment 1 header section.</li>
</ul>

  </td>

  <td>
<b>File: mail_5c.php</b>
<pre>
&lt;?php
// Email config (change data below)
$to      = "somebody@example.com";     // Rceipent address
$from    = "webmaster@example.com";    // Your email address
$subject = "Send email with text and image file attachments";
$message = "&lt;p&gt;Please see the attachment. Test mail_5c.&lt;/p&gt;";

$separator  = md5(time());    // A random hash is necessary to send mixed content
$eol        = PHP_EOL;                          // Use a PHP end of line constant
$filename1  = "test_mail_5.png";                          // Attachment file name
$filename2  = "test_mail_5.txt";                          // Attachment file name

// Read and encode data 1
$userfile1 = "./$filename1";                             // Set full path to file
$fp1 = fopen($userfile1, "r");                           // Open file for read
$attachment1 = fread($fp1, filesize($userfile1));        // Read file
$attachment1 = chunk_split(base64_encode($attachment1)); // Encode

// Read and encode data 2
$userfile2= "./$filename2";                               // Set full path to file
$fp2 = fopen($userfile2, "r");                            // Open file for read
$attachment2 = fread($fp2, filesize($userfile2));         // Read file
$attachment2 = chunk_split(base64_encode($attachment2));  // Encode

// Main header (multipart mandatory)
$headers = "From: ".$from.$eol;
$headers .= "MIME-Version: 1.0".$eol;
$headers .= "Content-Type: multipart/mixed; boundary=\"".$separator."\"".$eol.$eol;
$headers .= "Content-Transfer-Encoding: 7bit".$eol;
$headers .= "This is a MIME encoded message.".$eol.$eol;

// Message
$headers .= "--".$separator.$eol;
$headers .= "Content-Type: text/html; charset=\"iso-8859-1\"".$eol;
$headers .= "Content-Transfer-Encoding: 8bit".$eol.$eol;
$headers .= $message.$eol.$eol;

// Attachment 1
$headers .= "--".$separator.$eol;
$headers .= "Content-Type: application/octet-stream; name=\"".$filename1."\"".$eol;
$headers .= "Content-Transfer-Encoding: base64".$eol;
$headers .= "Content-Disposition: attachment".$eol.$eol;
$headers .= $attachment1.$eol.$eol;

// Attachment 2
$headers .= "--".$separator.$eol;
$headers .= "Content-Type: application/octet-stream; name=\"".$filename2."\"".$eol;
$headers .= "Content-Transfer-Encoding: base64".$eol;
$headers .= "Content-Disposition: attachment".$eol.$eol;
$headers .= $attachment2.$eol.$eol;
$headers .= "--".$separator."--";

// Send message
mail($to, $subject, "", $headers);
echo "Mail Sent.";
?&gt;


</pre>
  </td>
 </tr>
</table>


<script language="javascript" src="common/top.js"></script>
<a name="Example 6 - Basic mail forms attach a file"></a>
<h2>Example 6 - Basic mail forms attach a file</h2>

<p>The following uses a basic form to send an email with a file attachment. The form allows any file to be selected.</p>

<a name="Basic HTML mail form"></a>
<h3>Basic HTML mail form</h3>

<p>The HTML code shown below creates a basic form. Fields allow a user to enter email details. A drop down menu allows a user to select a file to be attached to the email. The form action is set to <b>test_mail_6.php</b> this script processes the form and sends the email with the selected file attachment. Note <b>enctype</b> is set to <b>multipart/form-data.</b></p>

<p><b>File: mail_6.html</b></p>
<pre>
&lt;!DOCTYPE html&gt;
&lt;html&gt;
  &lt;style type="text/css"&gt;
  textarea { width: 350px;margin-left:20px;}
  input { width: 350px;margin-left:20px;}
  &lt;/style&gt;
&lt;body&gt;
&lt;p&gt;&lt;b&gt;Attatch file to e-mail example:&lt;/b&gt;&lt;/p&gt;

&lt;form action="test_mail_6.php" method="post" name="form1" enctype="multipart/form-data"&gt;
 &lt;table&gt;
 &lt;tr&gt; &lt;td&gt;To e-mail:&lt;/td&gt;    &lt;td&gt;&lt;input name="txtTo" type="text" id="txtTo"&gt;&lt;/td&gt;  &lt;/tr&gt;
 &lt;tr&gt; &lt;td&gt;Subject:&lt;/td&gt;      &lt;td&gt;&lt;input name="txtSubject" type="text" id="txtSubject"&gt;&lt;/td&gt; &lt;/tr&gt;
 &lt;tr&gt; &lt;td&gt;Description:&lt;/td&gt;  &lt;td&gt;&lt;textarea name="txtDescription" cols="30" rows="4" id="txtDescription"&gt;&lt;/textarea&gt;&lt;/td&gt; &lt;/tr&gt;
 &lt;tr&gt; &lt;td&gt;From Name:&lt;/td&gt;    &lt;td&gt;&lt;input name="txtFromName" type="text"&gt;&lt;/td&gt; &lt;/tr&gt;
 &lt;tr&gt; &lt;td&gt;From e-mail:&lt;/td&gt;  &lt;td&gt;&lt;input name="txtFromEmail" type="text"&gt;&lt;/td&gt; &lt;/tr&gt;
 &lt;tr&gt; &lt;td&gt;Attachment:&lt;/td&gt;   &lt;td&gt;&lt;input name="fileAttach" type="file"  size="55"&gt;&lt;/td&gt; &lt;/tr&gt;
 &lt;tr&gt; &lt;td&gt;&nbsp;&lt;/td&gt;        &lt;td&gt;&lt;input type="reset" value="Reset" &gt;&lt;/td&gt; &lt;/tr&gt;
 &lt;tr&gt; &lt;td&gt;&nbsp;&lt;/td&gt;        &lt;td&gt;&lt;input type="submit" name="Submit" value="Send"&gt;&lt;/td&gt; &lt;/tr&gt;
 &lt;/table&gt;
&lt;/form&gt;

&lt;/body&gt;
&lt;/html&gt;
</pre>


<script language="javascript" src="common/top.js"></script>
<a name="PHP mail processing script"></a>
<h3>PHP mail processing script</h3>

<table>
<tr valign="top">
  <td>
    <b>Notes:</b>
<p>Other than extracting mail data there is nothing new for sending an email with an attachment.</p>

<p>Data is extracted using:</p> 
<pre>
$strTo      = 
$strSubject = 
$strMessage = 
</pre>

<p>The main header section specifies mime version, sets content type to multipart/mixed and sets the boundary separator to use.</p>
<p>The message header section sets content type to text/html and sets the transfer encoding to 8bit.</p>

<p>The attachment header section reads <b>file_get_contents</b> and encodes the file to be attached. It also sets content type to application/octet-stream, sets the transfer encoding to base64 and Content-Disposition to attachment.</p>


  </td>

  <td>
<b>File: mail_6.php</b>
<pre>
&lt;html&gt;
&lt;head&gt;
&lt;title&gt;Attatch file to e-mail example&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;

&lt;?php
  $strTo      = $_POST["txtTo"];
  $strSubject = $_POST["txtSubject"];
  $strMessage = nl2br($_POST["txtDescription"]);

  //Constants
  $separator = md5(time());  // A random hash is necessary to send mixed content
  $eol       = PHP_EOL;      // Use a PHP end of line constant

  $strHeader = "";
  $strHeader .= "From: ".$_POST["txtFromName"]."&lt;".$_POST["txtFromEmail"]."&gt;".$eol;
  $strHeader .= "Reply-To: ".$_POST["txtFromEmail"].$eol;

  // Main header (multipart mandatory)
  $strHeader .= "MIME-Version: 1.0".$eol;
  $strHeader .= "Content-Type: multipart/mixed; boundary=\"".$separator."\"".$eol.$eol;
  $strHeader .= "This is a multi-part message in MIME Fromat.".$eol;

  //-- Message
  $strHeader .= "--".$separator.$eol;
  $strHeader .= "Content-type: text/html; charset=utf-8".$eol;
  $strHeader .= "Content-Transfer-Encoding: 7bit".$eol.$eol;
  $strHeader .= $strMessage.$eol.$eol;
	
 // Attachment
 if($_FILES["fileAttach"]["name"] != ""){
   $strFilesName = $_FILES["fileAttach"]["name"];
   $strContent = chunk_split(base64_encode(file_get_contents($_FILES["fileAttach"]["tmp_name"]))); 
   $strHeader .= "--".$separator.$eol;
   $strHeader .= "Content-Type: application/octet-stream; name=\"".$strFilesName."\"".$eol; 
   $strHeader .= "Content-Transfer-Encoding: base64".$eol;
   $strHeader .= "Content-Disposition: attachment; filename=\"".$strFilesName."\"".$eol.$eol;
   $strHeader .= $strContent.$eol.$eol;
 }
	
 // Send message
 $OK = mail($strTo,$strSubject,null,$strHeader); 

 if($OK){
   echo "Mail sent.";
 }
 else{
  echo "Unable to send mail.";
 }
?&gt;

&lt;/body&gt;
&lt;/html&gt;
</pre>
  </td>
 </tr>
</table>



<script language="javascript" src="common/top.js"></script>

<!-- ============ End Content ============ -->
</td>
</tr>
</table>

<!-- Start footer -->
  <script language="javascript" src="common/footer.js"></script>
<!-- End footer -->

</body>
</html>
